(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Home"],{1148:function(e,t,r){"use strict";var o=r("a691"),i=r("1d80");e.exports=function(e){var t=String(i(this)),r="",n=o(e);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(r+=t);return r}},"408a":function(e,t,r){var o=r("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=o(e))throw TypeError("Incorrect invocation");return+e}},b680:function(e,t,r){"use strict";var o=r("23e7"),i=r("a691"),n=r("408a"),a=r("1148"),s=r("d039"),c=1..toFixed,l=Math.floor,u=function(e,t,r){return 0===t?r:t%2===1?u(e,t-1,r*e):u(e*e,t/2,r)},d=function(e){var t=0,r=e;while(r>=4096)t+=12,r/=4096;while(r>=2)t+=1,r/=2;return t},g=function(e,t,r){var o=-1,i=r;while(++o<6)i+=t*e[o],e[o]=i%1e7,i=l(i/1e7)},b=function(e,t){var r=6,o=0;while(--r>=0)o+=e[r],e[r]=l(o/t),o=o%t*1e7},p=function(e){var t=6,r="";while(--t>=0)if(""!==r||0===t||0!==e[t]){var o=String(e[t]);r=""===r?o:r+a.call("0",7-o.length)+o}return r},v=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}));o({target:"Number",proto:!0,forced:v},{toFixed:function(e){var t,r,o,s,c=n(this),l=i(e),v=[0,0,0,0,0,0],h="",f="0";if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(h="-",c=-c),c>1e-21)if(t=d(c*u(2,69,1))-69,r=t<0?c*u(2,-t,1):c/u(2,t,1),r*=4503599627370496,t=52-t,t>0){g(v,0,r),o=l;while(o>=7)g(v,1e7,0),o-=7;g(v,u(10,o,1),0),o=t-1;while(o>=23)b(v,1<<23),o-=23;b(v,1<<o),g(v,1,1),b(v,2),f=p(v)}else g(v,0,r),g(v,1<<-t,0),f=p(v)+a.call("0",l);return l>0?(s=f.length,f=h+(s<=l?"0."+a.call("0",l-s)+f:f.slice(0,s-l)+"."+f.slice(s-l))):f=h+f,f}})},bb51:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"grid grid-cols-3 bg-blue-50"},[r("div",{staticClass:"col-span-3 lg:h-12 h-8"},[r("navbar")],1),r("div",{staticClass:"lg:col-span-1 lg:h-screen h-4/5 col-span-3"},[r("scontrino")],1),r("div",{staticClass:"lg:col-span-2 lg:h-screen col-span-3"},[r("articoli")],1)])])},i=[],n=r("5530"),a=r("1da1"),s=(r("96cf"),r("bc3a")),c=r.n(s),l=r("0983"),u=r("2f62"),d=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"h-screen"},[o("div",{staticClass:"flex flex-col space-x-1 space-y-1 bg-white m-2 p-1 rounded shadow-md"},[o("div",{staticClass:"flex flex-row"},[o("label",{staticClass:"font-semibold mt-2.5"},[e._v("Art: ")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.descrizione_libera,expression:"descrizione_libera"}],staticClass:"w-full block rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 m-1 hover:border-blue-300",attrs:{type:"text",placeholder:"Descizione manuale"},domProps:{value:e.descrizione_libera},on:{input:function(t){t.target.composing||(e.descrizione_libera=t.target.value)}}}),o("label",{staticClass:"font-semibold mt-2.5"},[e._v("Rep: ")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.reparto_libero,expression:"reparto_libero"}],staticClass:"w-full block rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 m-1 hover:border-blue-300",attrs:{type:"text",placeholder:"Reparto manuale"},domProps:{value:e.reparto_libero},on:{input:function(t){t.target.composing||(e.reparto_libero=t.target.value)}}})]),o("div",{staticClass:"flex flex-row"},[o("label",{staticClass:"font-semibold mt-2.5"},[e._v("Qta: ")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.quantita_libera,expression:"quantita_libera"}],staticClass:"w-full block rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 m-1 hover:border-blue-300",attrs:{type:"text",placeholder:"Quantità manuale"},domProps:{value:e.quantita_libera},on:{input:function(t){t.target.composing||(e.quantita_libera=t.target.value)}}}),o("label",{staticClass:"font-semibold mt-2.5"},[e._v("Unità: ")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.prezzo_libero,expression:"prezzo_libero"}],staticClass:"w-full block rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 m-1 hover:border-blue-300",attrs:{type:"text",placeholder:"Prezzo manuale"},domProps:{value:e.prezzo_libero},on:{input:function(t){t.target.composing||(e.prezzo_libero=t.target.value)}}}),o("button",{staticClass:"bg-blue-300 rounded p-1 m-1 hover:bg-blue-400",on:{click:function(t){return t.preventDefault(),e.aggiungiArticolo({reparto:e.reparto_libero,quantita:e.quantita_libera,descrizione:e.descrizione_libera,prezzo:e.prezzo_libero})}}},[e._v(" aggiungi ")])])]),o("div",{staticClass:"overflow-scroll lg:h-3/4"},e._l(e.scontrino,(function(t){return o("div",{key:t,staticClass:"bg-white m-2 p-1 rounded shadow-md"},[o("div",{staticClass:"flex flex-col space-x-1 space-y-1"},[o("div",{staticClass:"flex flex-row"},[o("label",{staticClass:"font-semibold mt-2.5"},[e._v("Art: ")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.descrizione,expression:"articolo.descrizione"}],staticClass:"w-full block rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 m-1 hover:border-blue-300",attrs:{type:"text",placeholder:t.descrizione},domProps:{value:t.descrizione},on:{input:function(r){r.target.composing||e.$set(t,"descrizione",r.target.value)}}}),o("button",{staticClass:"bg-red-500 p-1 h-8 m-2 rounded hover:bg-red-600",on:{click:function(r){r.preventDefault(),e.$store.commit("cancellaArticolo",e.scontrino.indexOf(t))}}},[o("img",{staticClass:"h-4",attrs:{src:r("edb8")}})])]),o("div",{staticClass:"flex flex-row"},[o("label",{staticClass:"font-semibold mt-2.5"},[e._v("Qta: ")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.quantita,expression:"articolo.quantita"}],staticClass:"w-full block rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 m-1 hover:border-blue-300",attrs:{type:"text",placeholder:t.quantita},domProps:{value:t.quantita},on:{input:function(r){r.target.composing||e.$set(t,"quantita",r.target.value)}}}),o("label",{staticClass:"font-semibold mt-2.5"},[e._v("Unità: ")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.prezzo,expression:"articolo.prezzo"}],staticClass:"w-full block rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 m-1 hover:border-blue-300",attrs:{type:"text",placeholder:t.prezzo},domProps:{value:t.prezzo},on:{input:function(r){r.target.composing||e.$set(t,"prezzo",r.target.value)}}}),o("button",{staticClass:"bg-blue-300 rounded p-1 m-1 hover:bg-blue-400",on:{click:function(r){r.preventDefault(),e.aggiornaArticolo(e.scontrino.indexOf(t),{descrizione:t.descrizione,quantita:t.quantita,prezzo:t.prezzo,reparto:t.reparto})}}},[e._v(" aggiorna ")])])])])})),0),null!=e.prodotti?o("div",{staticClass:"flex flex-row lg:relative lg:bottom-0 fixed bottom-44 w-full bg-blue-50"},[o("button",{staticClass:"w-full bg-red-500 rounded shadow m-1 mb-3 lg:h-12 hover:bg-red-600",on:{click:function(t){return t.preventDefault(),e.cancellaScotrino(t)}}},[e._v(" Cancella scontrino ")]),o("router-link",{staticClass:"w-full bg-green-500 rounded shadow m-1 mb-3 lg:h-12 hover:bg-green-600 text-center p-3",attrs:{to:"/Pagamento"}},[e._v("Stampa")]),o("p",{staticClass:"w-full bg-blue-500 rounded shadow m-1 mb-3 lg:h-12 text-center p-3"},[e._v(" Sub: "+e._s(e.sub)+" ")])],1):e._e()])},g=[],b=(r("159b"),r("b680"),{name:"scontrino",data:function(){return{prezzo_libero:"",quantita_libera:"",descrizione_libera:"",reparto_libero:""}},methods:{aggiungiArticolo:function(e){var t=this;if(this.isNumeric(e.quantita)&this.isNumeric(e.prezzo)&this.isNumeric(e.reparto)&this.isASCII(e.descrizione))if(this.scontrino.length>0){var r=!1;this.scontrino.forEach((function(o){o.reparto==e.reparto&o.descrizione==e.descrizione&o.prezzo==e.prezzo&&(e.quantita=o.quantita+e.quantita,t.aggiornaArticolo(t.scontrino.indexOf(o),e),r=!0)})),r||this.$store.commit("aggiungiArticolo",e)}else this.$store.commit("aggiungiArticolo",e);else window.alert("I dati inseriti non sono validi.")},aggiornaArticolo:function(e,t){this.$store.commit("cancellaArticolo",e),this.$store.commit("aggiungiArticolo",t)},cancellaScotrino:function(){this.$store.commit("cancellaScontrino")},isASCII:function(e){return/^[\x20-\x7F]*$/.test(e)},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(u["c"])({scontrino:"getScontrino"})),Object(u["c"])({prodotti:"getProdotti"})),{},{sub:function(){if(this.scontrino.length>0){var e=0;return this.scontrino.forEach((function(t){e+=t.prezzo*t.quantita})),e.toFixed(2)}return 0}})}),p=b,v=r("2877"),h=Object(v["a"])(p,d,g,!1,null,null,null),f=h.exports,m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"lg:h-screen lg:mt-2"},[r("div",{staticClass:"flex flex-row bg-white rounded p-1 shadow lg:relative lg:top-0 bottom-32 fixed w-full"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.filtro,expression:"filtro"}],staticClass:"m-1 block rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 w-full hover:border-blue-300",attrs:{type:"text"},domProps:{value:e.filtro},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getProdottiFiltrati(t)},input:function(t){t.target.composing||(e.filtro=t.target.value)}}}),null!=e.prodotti?r("button",{staticClass:"bg-blue-300 p-2 rounded block m-1 hover:bg-blue-400",on:{click:function(t){return t.preventDefault(),e.getProdottiFiltrati(t)}}},[e._v(" Cerca ")]):e._e(),null==e.prodotti?r("button",{staticClass:"bg-blue-300 p-2 rounded block m-1 hover:bg-blue-400",on:{click:function(t){return t.preventDefault(),e.getProdotti(t)}}},[e._v(" Carica prodotti ")]):e._e()]),r("div",{staticClass:"flex lg:flex-row flex-col flex-wrap overflow-scroll lg:h-5/6 h-32 lg:relative lg:top-0 bottom-0 fixed w-full bg-blue-50"},e._l(e.prodotti,(function(t){return r("button",{key:t,staticClass:"box-content h-20 w-20 p-4 bg-white m-2 rounded-md shadow-md hover:bg-gray-100",on:{click:function(r){return r.preventDefault(),e.aggiungiArticolo({reparto:t.id_reparto,quantita:"1",descrizione:t.desc_breve,prezzo:t.prezzo})}}},[e._v(" "+e._s(t.desc_breve)+" ")])})),0)])},x=[],w=(r("d3b7"),r("25f0"),{name:"articoli",data:function(){return{filtro:""}},methods:{aggiungiArticolo:function(e){var t=this;if(console.log(e),this.isNumeric(e.quantita)&this.isNumeric(e.prezzo)&this.isNumeric(e.reparto)&this.isASCII(e.descrizione))if(this.scontrino.length>0){var r=!1;this.scontrino.forEach((function(o){if(o.reparto==e.reparto&o.descrizione==e.descrizione&o.prezzo==e.prezzo){var i=parseInt(o.quantita)+parseInt(e.quantita);e.quantita=i.toString(),t.aggiornaArticolo(t.scontrino.indexOf(o),e),r=!0}})),r||this.$store.commit("aggiungiArticolo",e)}else this.$store.commit("aggiungiArticolo",e);else window.alert("I dati inseriti non sono validi.")},aggiornaArticolo:function(e,t){this.$store.commit("cancellaArticolo",e),this.$store.commit("aggiungiArticolo",t)},getProdotti:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,o,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={},r.token=e.token,r.chiave=e.chiave,t.next=5,l["a"].encSim(JSON.stringify(r),e.chiaveServer);case 5:return o=t.sent,t.next=8,c.a.post("db/get/prodotti",o,{headers:{"Content-Type":"text/plain"}});case 8:return i=t.sent,t.t0=JSON,t.next=12,l["a"].decSim(i.data,e.chiave);case 12:t.t1=t.sent,n=t.t0.parse.call(t.t0,t.t1),e.$store.commit("setProdotti",n);case 15:case"end":return t.stop()}}),t)})))()},getProdottiFiltrati:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,o,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=e.filtro){t.next=3;break}return e.getProdotti(),t.abrupt("return");case 3:return r={},r.token=e.token,r.chiave=e.chiave,r.filtro=e.filtro,t.next=9,l["a"].encSim(JSON.stringify(r),e.chiaveServer);case 9:return o=t.sent,t.next=12,c.a.post("db/get/prodotti_filtrati",o,{headers:{"Content-Type":"text/plain"}});case 12:return i=t.sent,t.t0=JSON,t.next=16,l["a"].decSim(i.data,e.chiave);case 16:t.t1=t.sent,n=t.t0.parse.call(t.t0,t.t1),e.$store.commit("setProdotti",n);case 19:case"end":return t.stop()}}),t)})))()},isASCII:function(e){return/^[\x20-\x7F]*$/.test(e)},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},watch:{chiaveServer:function(){this.getProdotti()}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(u["c"])({pubkey:"getPubkey"})),Object(u["c"])({chiave:"getChiave"})),Object(u["c"])({token:"getToken"})),Object(u["c"])({scontrino:"getScontrino"})),Object(u["c"])({chiaveServer:"getChiaveServer"})),Object(u["c"])({prodotti:"getProdotti"}))}),k=w,C=Object(v["a"])(k,m,x,!1,null,null,null),z=C.exports,_=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"h-full flex flex-row bg-white shadow"},[e._l(e.stateArray,(function(t){return o("p",{key:t.id,staticClass:"lg:p-2 m-1 h-6 px-1 lg:h-10 font-semibold"},[e._v(" Cassa "+e._s(t.stato)+" ")])})),o("router-link",{staticClass:"m-1 lg:p-2 h-6 lg:h-10 bg-blue-300 rounded px-1 hover:bg-blue-400 shadow",attrs:{to:"/Connessione"}},[e._v("Connetti")]),o("router-link",{staticClass:"m-1 lg:p-2 h-6 lg:h-10 bg-blue-300 rounded px-1 hover:bg-blue-400 shadow",attrs:{to:"/"}},[e._v("Database")]),o("router-link",{staticClass:"m-1 lg:p-2 h-6 lg:h-10 bg-blue-300 rounded px-1 hover:bg-blue-400 shadow",attrs:{to:"/"}},[o("img",{staticClass:"h-4 m-1",attrs:{src:r("cc6c")}})])],2)},S=[],y={data:function(){return{stateArray:[{stato:"disconnessa",id:0}],id:1}},mounted:function(){""!=this.chiaveServer&&setInterval(this.getStato,1e3)},methods:{getStato:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,o,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={},r.token=e.token,r.chiave=e.chiave,t.next=5,l["a"].encSim(JSON.stringify(r),e.chiaveServer);case 5:return o=t.sent,t.prev=6,t.next=9,c.a.post("status",o,{headers:{"Content-Type":"text/plain"}});case 9:return i=t.sent,t.t0=JSON,t.next=13,l["a"].decSim(i.data,e.chiave);case 13:t.t1=t.sent,n=t.t0.parse.call(t.t0,t.t1),console.log(n),e.id+=1,e.stateArray=[{stato:n.stato,id:e.id}],t.next=23;break;case 20:t.prev=20,t.t2=t["catch"](6),console.error(t.t2);case 23:case"end":return t.stop()}}),t,null,[[6,20]])})))()}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(u["c"])({chiave:"getChiave"})),Object(u["c"])({chiaveServer:"getChiaveServer"})),Object(u["c"])({token:"getToken"})),watch:{chiaveServer:function(){setInterval(this.getStato,1e3)}}},O=y,j=Object(v["a"])(O,_,S,!1,null,null,null),N=j.exports,A={name:"Home",components:{scontrino:f,articoli:z,navbar:N},methods:{redirect:function(){this.$router.push({name:"Login"})},checkToken:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return localStorage.token?e.$store.commit("setToken",localStorage.token):e.$router.push({name:"Login"}),r={},r.token=e.token,r.chiave=e.chiave,t.next=6,l["a"].encSim(JSON.stringify(r),e.chiaveServer);case 6:return o=t.sent,t.prev=7,t.next=10,c.a.post("status",o,{headers:{"Content-Type":"text/plain"}});case 10:t.next=17;break;case 12:t.prev=12,t.t0=t["catch"](7),console.error(t.t0),localStorage.removeItem("token"),e.redirect();case 17:case"end":return t.stop()}}),t,null,[[7,12]])})))()},getChiaveServer:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,o,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=e.chiaveServer){t.next=22;break}return r={},r.token=localStorage.token,r.chiave=e.chiave,t.next=6,l["a"].encrypt(JSON.stringify(r),e.pubkey);case 6:return o=t.sent,t.prev=7,t.next=10,c.a.post("key",o,{headers:{"Content-Type":"text/plain"}});case 10:return i=t.sent,t.t0=JSON,t.next=14,l["a"].decSim(i.data,e.chiave);case 14:t.t1=t.sent,n=t.t0.parse.call(t.t0,t.t1),e.$store.commit("setChiaveServer",n.chiaveServer),t.next=22;break;case 19:t.prev=19,t.t2=t["catch"](7),console.error(t.t2);case 22:case"end":return t.stop()}}),t,null,[[7,19]])})))()},auto:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={},r.chiave=e.chiave,r.token=e.token,t.next=5,l["a"].encSim(JSON.stringify(r),e.chiaveServer);case 5:return o=t.sent,t.next=8,c.a.post("indirizzo/auto",o,{headers:{"Content-Type":"text/plain"}});case 8:case"end":return t.stop()}}),t)})))()}},watch:{chiaveServer:function(){this.checkToken(),this.auto()},pubkey:function(){this.getChiaveServer()}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(u["c"])({pubkey:"getPubkey"})),Object(u["c"])({chiave:"getChiave"})),Object(u["c"])({token:"getToken"})),Object(u["c"])({chiaveServer:"getChiaveServer"}))},$=A,q=Object(v["a"])($,o,i,!1,null,null,null);t["default"]=q.exports},cc6c:function(e,t,r){e.exports=r.p+"img/setting.563f9483.svg"},edb8:function(e,t,r){e.exports=r.p+"img/trash-bin.d1f653ad.svg"}}]);
//# sourceMappingURL=Home.363a9ba7.js.map