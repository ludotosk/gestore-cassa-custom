(function(e){function t(t){for(var r,c,i=t[0],u=t[1],s=t[2],l=0,p=[];l<i.length;l++)c=i[l],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&p.push(o[c][0]),o[c]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);f&&f(t);while(p.length)p.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var u=n[c];0!==o[u]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},a=[];function c(e){return i.p+"js/"+({Home:"Home",Pagamento:"Pagamento"}[e]||e)+"."+{Home:"363a9ba7",Pagamento:"b2a85679","chunk-2d0cbb3c":"7ac2f547"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=r);var a,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=c(e);var s=new Error;a=function(t){u.onerror=u.onload=null,clearTimeout(l);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",s.name="ChunkLoadError",s.type=r,s.request=a,n[1](s)}o[e]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:u})}),12e4);u.onerror=u.onload=a,document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var f=s;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0983":function(e,t,n){"use strict";(function(e){var r=n("1da1"),o=n("d4ec"),a=n("bee2"),c=(n("ac1f"),n("1276"),n("a15b"),n("d3b7"),n("25f0"),n("96cf"),n("bc3a")),i=n.n(c),u=n("1c46"),s=n.n(u),l="pubkey",f=function(){function t(){Object(o["a"])(this,t)}return Object(a["a"])(t,null,[{key:"getPubkey",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get(l);case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"decSim",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n,r){var o,a,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=n.split(":"),a=e.from(o.shift(),"hex"),c=s.a.createDecipheriv("aes256",r,a),i=c.update(o.join(":"),"hex","utf8"),i+=c.final("utf8"),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"encrypt",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n,r){var o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=e.from(n,"utf8"),a=s.a.publicEncrypt(r,o),t.abrupt("return",a.toString("base64"));case 3:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"encSim",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r,o,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=s.a.randomBytes(16),o=s.a.createCipheriv("aes256",n,r),a=o.update(t,"utf8","hex"),a+=o.final("hex"),c=r.toString("hex")+":"+a,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"makeid",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n=[],r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=r.length,a=0;a<t;a++)n.push(r.charAt(Math.floor(Math.random()*o)));return e.abrupt("return",n.join(""));case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),t}();t["a"]=f}).call(this,n("b639").Buffer)},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bg-blue-50 h-screen lg:overflow-y-hidden",attrs:{id:"app"}},[n("router-view")],1)},a=[],c=n("5530"),i=n("2f62"),u={methods:Object(c["a"])({},Object(i["b"])(["setPubkey","setChiave"])),created:function(){this.setPubkey(),this.setChiave()}},s=u,l=n("2877"),f=Object(l["a"])(s,o,a,!1,null,null,null),p=f.exports,d=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container mx-auto space-y-4 px-1"},[n("h1",{staticClass:"text-gray-700"},[e._v("Login")]),n("h2",{staticClass:"text-gray-500"},[e._v(" Il codice login è disponible sullo schermo del computerino. ")]),n("form",[n("div",{staticClass:"space-x-4 w-full bg-red-300 p-4 rounded shadow-md"},[e._m(0),n("div",{staticClass:"inline-block w-4/5"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.codice,expression:"codice"}],staticClass:"mt-1 block w-full rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 hover:border-red-400",attrs:{type:"text",placeholder:"Inserire il codice mostrato sullo schermo del computerino"},domProps:{value:e.codice},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)},input:function(t){t.target.composing||(e.codice=t.target.value)}}})]),n("button",{staticClass:"bg-gray-300 p-2 rounded block m-4 hover:bg-gray-400",on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v(" Sign in ")])])]),200==e.code?n("div",{staticClass:"text-red-600"},[e._v(" Il codice verrà mostrato per 5 minuti, ricaricare la pagina per mostrane un'altro. ")]):500==e.code?n("div",{staticClass:"text-red-600"},[e._v(" Sì è generato un erroe nella creazione del codice. ")]):e._e()])},m=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"inline-block ml-4"},[n("label",{staticClass:"font-semibold"},[e._v("Codice ")])])}],v=n("1da1"),b=(n("96cf"),n("bc3a")),g=n.n(b),k=n("0983"),y={name:"Login",data:function(){return{codice:null,code:null}},created:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:localStorage.token&&e.redirect();case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(localStorage.token){t.next=12;break}return t.prev=1,t.next=4,g.a.get("/codice");case 4:n=t.sent,e.code=n.status,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),console.error(t.t0),e.code=500;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()},methods:{login:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isCodice(e.codice)){t.next=24;break}return n={},n.codice=e.codice,n.chiave=e.chiave,t.next=6,k["a"].encrypt(JSON.stringify(n),e.pubkey);case 6:return r=t.sent,t.next=9,g.a.post("login",r,{headers:{"Content-Type":"text/plain"}});case 9:if(o=t.sent,200!=o.status){t.next=21;break}return t.t0=JSON,t.next=14,k["a"].decSim(o.data,e.chiave);case 14:t.t1=t.sent,a=t.t0.parse.call(t.t0,t.t1),e.$store.commit("setChiaveServer",a.chiaveServer),e.$store.commit("setToken",a.token),e.redirect(),t.next=22;break;case 21:e.code=500;case 22:t.next=25;break;case 24:window.alert("Inserire un codice valido");case 25:case"end":return t.stop()}}),t)})))()},isCodice:function(e){return/^\d{4}$/.test(e)},redirect:function(){this.$router.push({name:"Home"})}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(i["c"])({pubkey:"getPubkey"})),Object(i["c"])({chiave:"getChiave"})),Object(i["c"])({token:"getToken"}))},w=y,x=Object(l["a"])(w,h,m,!1,null,null,null),O=x.exports;r["a"].use(d["a"]);var j=[{path:"/",name:"Login",component:O},{path:"/Home",name:"Home",component:function(){return n.e("Home").then(n.bind(null,"bb51"))}},{path:"/Pagamento",name:"Pagamento",component:function(){return n.e("Pagamento").then(n.bind(null,"bf79"))}},{path:"/Connessione",name:"Connessione",component:function(){return n.e("chunk-2d0cbb3c").then(n.bind(null,"4b91"))}}],C=new d["a"]({mode:"history",base:"/",routes:j}),P=C;n("a434");r["a"].use(i["a"]);var S=new i["a"].Store({state:{pubkey:"",chiave:"",token:"",scontrino:[],chiaveServer:"",prodotti:null},mutations:{setPubkey:function(e,t){e.pubkey=t},setChiave:function(e,t){e.chiave=t},setToken:function(e,t){localStorage.token=t,e.token=t},aggiungiArticolo:function(e,t){e.scontrino.push(t)},cancellaScontrino:function(e){e.scontrino=[]},cancellaArticolo:function(e,t){e.scontrino.splice(t,1)},setChiaveServer:function(e,t){e.chiaveServer=t},setProdotti:function(e,t){e.prodotti=t}},actions:{setPubkey:function(e){return Object(v["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k["a"].getPubkey();case 2:n=t.sent,e.commit("setPubkey",n);case 4:case"end":return t.stop()}}),t)})))()},setChiave:function(e){return Object(v["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k["a"].makeid(32);case 2:n=t.sent,e.commit("setChiave",n);case 4:case"end":return t.stop()}}),t)})))()}},modules:{},getters:{getPubkey:function(e){return e.pubkey},getChiave:function(e){return e.chiave},getToken:function(e){return e.token},getScontrino:function(e){return e.scontrino},getChiaveServer:function(e){return e.chiaveServer},getProdotti:function(e){return e.prodotti}}});n("7d05");r["a"].config.productionTip=!1,new r["a"]({router:P,store:S,render:function(e){return e(p)}}).$mount("#app")},6:function(e,t){},7:function(e,t){},"7d05":function(e,t,n){},8:function(e,t){},9:function(e,t){}});
//# sourceMappingURL=app.3800b23b.js.map